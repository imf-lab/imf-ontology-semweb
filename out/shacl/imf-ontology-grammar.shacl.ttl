@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix imf: <http://ns.imfid.org/imf#> .
@prefix o-owl-rstr: <http://tpl.ottr.xyz/owl/restriction/0.1/> .
@prefix o-rdfs: <http://tpl.ottr.xyz/rdfs/0.2/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix o-imf-t-o: <http://ns.imfid.org/templates/type/owl/> .
@prefix o-imf-t-s: <http://ns.imfid.org/templates/type/shacl/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix o-imf: <http://ns.imfid.org/templates/> .
@prefix ottr: <http://ns.ottr.xyz/0.4/> .
@prefix o-owl-ma: <http://tpl.ottr.xyz/owl/macro/0.1/> .
@prefix vann: <http://purl.org/vocab/vann/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix shsh: <http://www.w3.org/ns/shacl-shacl#> .
@prefix o-rdf: <http://tpl.ottr.xyz/rdf/0.1/> .
@prefix pca-plm: <http://rds.posccaesar.org/ontology/plm/rdl/> .
@prefix pav: <http://purl.org/pav/> .
@prefix ex: <http://example.com#> .
@prefix o-owl-dec: <http://tpl.ottr.xyz/owl/declaration/0.1/> .
@prefix o-owl-ax: <http://tpl.ottr.xyz/owl/axiom/0.1/> .
@prefix vs: <http://www.w3.org/2003/06/sw-vocab-status/ns#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .

imf:IMFOntologyGrammar
    dc:description "This shapes graph can be used to validate the IMF Ontology." ;
    pav:createdBy [
        foaf:name "Martin G. Skj√¶veland"
    ] ;
    pav:createdOn "2023-06-30T00:00:00"^^xsd:dateTime ;
    a owl:Ontology ;
    owl:versionIRI <http://ns.imfid.org/20230630/imf-ontology-grammar.shacl.ttl> ;
    skos:editorialNote """Result of validation against specified sh:shapesGraph:
Result of validating RDF data <out/shacl/imf-ontology-grammar.shacl.ttl> against SHACL shape <http://www.w3.org/ns/shacl-shacl#>:
2023-06-27
Conforms


Result of validating RDF data <out/shacl/imf-ontology-grammar.shacl.ttl> against SHACL shape <http://shipshape.dyreriket.xyz/std-vocabulary-elements.ttl>:
2023-06-27
Conforms


Result of validating RDF data <out/shacl/imf-ontology-grammar.shacl.ttl> against SHACL shape <out/shacl/imf-terms-grammar.shacl.ttl>:
2023-06-27
Node=<http://shipshape.dyreriket.xyz#ANY_NODE>
  Value: <http://ns.imfid.org/imf#IMFOntologyGrammar>
  Message: Unrecognised IMF vocabulary element. Check spelling.

    """ ;
    skos:prefLabel "Information Modelling Framework: IMF Ontology Grammar" ;
    sh:shapesGraph <http://ns.imfid.org/20230630/imf-terms-grammar.shacl.ttl>, <http://shipshape.dyreriket.xyz/std-vocabulary-elements.ttl>, <http://www.w3.org/ns/shacl-shacl#> .

[]
    a sh:NodeShape ;
    sh:property [
        sh:in ("unstable"
            "testing"
            "stable"
            "archaic"
        ) ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path vs:term_status
    ], [
        sh:minCount 1 ;
        sh:path skos:changeNote ;
        sh:pattern "^[0-9].[0-9].[0-9] :: [Added|Changed:]"
    ], [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path skos:definition
    ], [
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path skos:prefLabel
    ], [
        sh:in ("elements"
            "aspects"
            "attributes"
            "generic relations"
            "model"
        ) ;
        sh:maxCount 1 ;
        sh:minCount 1 ;
        sh:path vann:termGroup
    ] ;
    sh:target [
        a sh:SPARQLTarget ;
        sh:select """
      PREFIX owl:   <http://www.w3.org/2002/07/owl#> 
      PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>
      SELECT ?this { 
        ?this a ?type 
	FILTER (STRSTARTS(STR(?this), 'http://ns.imfid.org'))
        FILTER (isIRI(?this))
        #FILTER (?type IN ( owl:Class, owl:NamedIndividual, owl:ObjectProperty, owl:DatatypeProperty, owl:AnnotationProperty ))
        FILTER (?type != owl:Ontology)
        FILTER NOT EXISTS { 
	  ?this skos:note ?note .
	  FILTER (STRSTARTS(STR(?note), 'This resource is programatically generated.'))
	}
        FILTER NOT EXISTS { 
	  ?this skos:exactMatch [] .
        }
      }
      ## ORDER BY ?this
      """
    ] .

